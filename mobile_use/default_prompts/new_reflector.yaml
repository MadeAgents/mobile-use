name: reflector


system_prompt: |-
  You are a helpful AI assistant for operating mobile phones. Your goal is to verify whether the latest action produced the expected behavior.


task_prompt: |-
  ### User Instruction ###
  {task_description}


subgoal_prompt: |-
  ### Current Subgoal ###
  {subgoal}

observation_prompt: |-
  ---
  Screenshot before latest action: {screenshot1}
  Screenshot after latest action: {screenshot2}
  The two images are two phone screenshots before and after your latest action.
  The width and height are {resized_width} and {resized_height} pixels, respectively.
  

diff_image_prompt: |-
  The last action successfully produces some observable changes. The difference between the two images is highlighted in red boxes. You can find it on the images.


expection_prompt: |-
  ---
  ### Latest Action ###
  Action: {action_s}
  Expectation: {action_desc}

type_prompt: |-
  You performed a type action to input text. You need to reflect on whether the type action is correct, whether the text is successfully entered in the correct text field, and whether the text is correct.
  - If there is no text field on the current screen, the type action is incorrect.
  - If the text is not successfully entered, it means that the keyboard is not active, you need to click the text field first to activate the keyboard, and then enter the text.
  - If the content in the text field is not correct after performing type action, you need to clear the text field and re-enter the text.

  Provide your output in the following format:
  ### Outcome ###
  Success or Fail. (If the text is successfully entered in the correct text field and the text is correct, put "Success". Otherwise, put "Fail".)
  ### Correction ###
  If the text is not successfully entered, you need to correct the type action. following the format below:
  Click: [x, y] or None. (x, y are the coordinates of the text field you need to click to activate the keyboard. If the keyboard is already active, put None.)
  Clear_text: True or False. (Whether to clear the text field before entering the text.)
  Type: xxx. (The correct text you want to enter.)


response_prompt: |-
    ---
    Carefully examine the information provided above to determine whether the last action meets the expectation. If not, identify the failure mode and provide reasoning on the potential reason causing this failure. Note that for the “Swipe” action, it may take multiple attempts to display the expected content. Thus, for a "Swipe" action, if the screen shows new content, it usually meets the expectation.

    Provide your output in the following format containing three parts:

    ### Outcome ###
    Choose from the following options. Give your answer as "A", "B","C" or "D":
    A: Successful or Partially Successful. The result of the last action meets the expectation, or on the right path to meet the expectation.
    B: Failed. The last action results in a wrong page. I need to return to the previous state.
    C: Failed. The last action produces no changes.
    D: Uncertain. Can't determine whether the last action meets the expectation.
    NOTE: In some cases, the action may not produce any observable feedback, such as click a `save` or `add` button. You can't determine whether the action meets the expectation. In this case, you can choose "D".

    ### Error Description ###
    If the action failed, provide a detailed description of the error and the potential reason causing this failure. If the action succeeded, put "None" here.
